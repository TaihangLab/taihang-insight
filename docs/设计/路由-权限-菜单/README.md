# è·¯ç”±-æƒé™-èœå•è®¾è®¡æ–‡æ¡£

> **å¤ªè¡Œè§†è§‰AIå¹³å°** - å‰ç«¯è·¯ç”±ä¸æƒé™ç®¡ç†ç³»ç»Ÿå®Œæ•´è®¾è®¡æ–‡æ¡£

## ğŸ“š æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£é›†è¯¦ç»†è¯´æ˜äº†å¹³å°å‰ç«¯è·¯ç”±ä¸æƒé™ç®¡ç†ç³»ç»Ÿçš„å®Œæ•´è®¾è®¡ï¼ŒåŒ…æ‹¬ç™»å½•è®¤è¯ã€æƒé™æ§åˆ¶ã€èœå•æ¸²æŸ“å’ŒåŠ¨æ€è·¯ç”±çš„å®ç°ã€‚

**æ¶æ„ç‰ˆæœ¬**: v2.0 (ç‹¬ç«‹ Store æ¨¡å— + åŠ¨æ€è·¯ç”±)
**æœ€åæ›´æ–°**: 2025-02-23

---

## ğŸ“– æ–‡æ¡£ç›®å½•

### æ ¸å¿ƒè®¾è®¡æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ | æ ¸å¿ƒå†…å®¹ |
|-----|------|---------|
| [01-æ¶æ„æ¦‚è§ˆ](./01-æ¶æ„æ¦‚è§ˆ.md) | ç³»ç»Ÿæ•´ä½“æ¶æ„è®¾è®¡ | æŠ€æœ¯æ ˆã€æ¶æ„åŸåˆ™ã€ç³»ç»Ÿæµç¨‹å›¾ |
| [02-æ•°æ®å­˜å‚¨ç­–ç•¥](./02-æ•°æ®å­˜å‚¨ç­–ç•¥.md) | Store æ¨¡å—ä¸æŒä¹…åŒ– | Pinia storesã€localStorage æ˜ å°„ã€æ•°æ®è¯»å–ç­–ç•¥ |
| [03-ç™»å½•æµç¨‹](./03-ç™»å½•æµç¨‹.md) | ç”¨æˆ·ç™»å½•å®Œæ•´æµç¨‹ | ç™»å½•é¡µé¢ã€API è°ƒç”¨ã€æ•°æ®è®¾ç½®ã€æµç¨‹å›¾ |
| [04-åŠ¨æ€è·¯ç”±ç³»ç»Ÿ](./04-åŠ¨æ€è·¯ç”±ç³»ç»Ÿ.md) | è·¯ç”±é…ç½®ä¸åŠ¨æ€ç”Ÿæˆ | componentMapã€setupAsyncRoutesã€è·¯ç”±ç»“æ„ |
| [05-è·¯ç”±å®ˆå«](./05-è·¯ç”±å®ˆå«.md) | è·¯ç”±å®ˆå«ä¸è®¤è¯ | beforeEachã€ç™½åå•ã€è®¤è¯æ£€æŸ¥ã€æµç¨‹å›¾ |
| [06-èœå•æ¸²æŸ“](./06-èœå•æ¸²æŸ“.md) | èœå•ç»„ä»¶ä¸æ•°æ®ç»“æ„ | èœå•æ¶æ„ã€æ•°æ®æ ¼å¼ã€è¿‡æ»¤é€»è¾‘ |
| [07-æƒé™æ§åˆ¶](./07-æƒé™æ§åˆ¶.md) | æƒé™ç ä¸æƒé™æ£€æŸ¥ | æƒé™æ ¼å¼ã€æ£€æŸ¥æ–¹æ³•ã€API |

### å‚è€ƒæ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|-----|------|
| [08-å…³é”®æ–‡ä»¶ç´¢å¼•](./08-å…³é”®æ–‡ä»¶ç´¢å¼•.md) | æ ¸å¿ƒæ–‡ä»¶ä½ç½®ä¸è¯´æ˜ |
| [09-å¸¸è§é—®é¢˜](./09-å¸¸è§é—®é¢˜.md) | å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ |
| [10-ç‰ˆæœ¬å†å²](./10-ç‰ˆæœ¬å†å².md) | æ¶æ„æ¼”è¿›å†å² |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ¨èé˜…è¯»é¡ºåº

1. **æ–°æ‰‹å…¥é—¨**: 01 â†’ 03 â†’ 05 â†’ 06
2. **æ¶æ„ç†è§£**: 01 â†’ 02 â†’ 04 â†’ 07
3. **é—®é¢˜æ’æŸ¥**: 08 â†’ 09 â†’ 02 â†’ 05

### æ ¸å¿ƒæ¦‚å¿µé€Ÿè§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç”¨æˆ·è®¿é—®æµç¨‹                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æœªç™»å½•         â”‚ â†’   â”‚   å·²ç™»å½•         â”‚
â”‚   è·³è½¬ /login    â”‚     â”‚   è·¯ç”±å®ˆå«æ”¾è¡Œ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â–¼                                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  åŠ¨æ€è·¯ç”±ç”Ÿæˆ   â”‚               â”‚  èœå•æ¸²æŸ“      â”‚
        â”‚  setupAsync   â”‚               â”‚  el-menu      â”‚
        â”‚  Routes()     â”‚               â”‚  Component    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                                 â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  æƒé™æ£€æŸ¥      â”‚
                        â”‚  hasPermissionâ”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ æ¶æ„æ ¸å¿ƒ

### æ¨¡å—åŒ– Store æ¶æ„

```
Pinia Stores (ç‹¬ç«‹æ¨¡å—)
â”œâ”€â”€ token.ts         â†’ { token: string }
â”œâ”€â”€ userInfo.ts      â†’ { userInfo: UserInfo }
â”œâ”€â”€ permissions.ts   â†’ { permissions: string[] }
â””â”€â”€ menus.ts         â†’ { menuTree: MenuItem[] }
        â”‚
        â–¼ pinia-plugin-persistedstate
        â”‚
        â–¼
localStorage (ç‹¬ç«‹é”®)
â”œâ”€â”€ taihang-token
â”œâ”€â”€ taihang-user-info
â”œâ”€â”€ taihang-permissions
â””â”€â”€ taihang-menus
```

### åŠ¨æ€è·¯ç”±ç³»ç»Ÿ

```
åç«¯èœå•æ ‘ â†’ setupAsyncRoutes() â†’ Vue Router
                        â”‚
                        â–¼
                 componentMap æŸ¥æ‰¾
                        â”‚
                        â–¼
              router.addRoute('Layout', route)
```

---

## ğŸ“ å…³é”® API

### ç™»å½•è®¤è¯

```typescript
// 1. ç™»å½•
POST /api/v1/login
â†’ { token: string }

// 2. è·å–ç”¨æˆ·ä¿¡æ¯
GET /api/v1/user/info
â†’ { user_id, user_name, ... }

// 3. è·å–æƒé™åˆ—è¡¨
GET /api/v1/permissions
â†’ { permission_codes: string[] }

// 4. è·å–èœå•æ ‘
GET /api/v1/menu/tree
â†’ { menu_tree: MenuItem[] }
```

### æƒé™æ£€æŸ¥

```typescript
import { usePermissionsStore } from '@/stores'

const permissionsStore = usePermissionsStore()

// æ£€æŸ¥å•ä¸ªæƒé™
permissionsStore.hasPermission('monitor:realtime:page')

// æ£€æŸ¥å¤šä¸ªæƒé™ï¼ˆæ»¡è¶³å…¶ä¸€å³å¯ï¼‰
permissionsStore.hasAnyPermission(['system:user:add', 'system:user:edit'])
```

---

## ğŸ”— ç›¸å…³é“¾æ¥

- [é¡¹ç›®ä¸»æ–‡æ¡£](../../../.wiki/è®¾è®¡/ç™»å½•ä¸æƒé™ç³»ç»Ÿæµç¨‹.md)
- [Vue Router å®˜æ–¹æ–‡æ¡£](https://router.vuejs.org/)
- [Pinia å®˜æ–¹æ–‡æ¡£](https://pinia.vuejs.org/)
- [Element Plus æ–‡æ¡£](https://element-plus.org/)

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä¸ºå¤ªè¡Œè§†è§‰AIå¹³å°å†…éƒ¨æ–‡æ¡£ã€‚
